# -*- coding: utf-8 -*-
"""Stock_price_Prediction.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1LNurrOnwJcRU1ceSuVkObF-LV-5b5ROs
"""

#Import the libraries
import math
import numpy as np
import pandas as pd
import pandas_datareader as web
from sklearn.preprocessing import MinMaxScaler
from keras.models import Sequential
from keras.layers import Dense,LSTM
import matplotlib.pyplot as plt
import datetime

#Get the stock qoute
#API KEY of Alpha vantage API Time Series: Daily Adjusted
av_api_key = 'PY428Q2LKDDX8NC9'

start_date = '2002-01-01'
end_date = '2019-12-17'
data_source = 'av-daily-adjusted'
symbol ='MSFT'

#Get the stock quote
df = web.DataReader(symbol,data_source,start_date,end_date,api_key= av_api_key)

df.index =pd.to_datetime(df.index)
df.index

plt.plot(df.index,df['close'])

def df_to_windowed_df(dataframe,start_date_str,last_date_str, n=3):
  first_date = pd.to_datetime(start_date_str)
  last_date = pd.to_datetime(last_date_str)

  dates = []
  X,Y = []

  target_date = first_date
  last_time = False
  while True:
    df_subset = dataframe.loc[:target_date].tail(n+1)